<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <title>Improx - Interactive Mode Proxy 0.2</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8" />
        <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8" />
    <script type="text/javascript">
function addJsClass(el) {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
    </head>

    <body class="body" onload="addJsClass();">
        <div id="navigation">
            <ul>
                <li>
                    <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                        <a href="../guide/index.html" class="button">Table of contents</a>
                        <div id="nav-summary-childs" style="display:none;">
                            
                            <div class="toc-item" style="margin-left:0"><a href="#introduction"><strong>1</strong><span>Introduction</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#gettingStarted"><strong>2</strong><span>Getting Started</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#integrationWithEditors"><strong>3</strong><span>Integration with Editors and IDEs</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#advancedTopics"><strong>4</strong><span>Advanced Topics</span></a></div>
                            
                        </div>
                    </div>
                </li>
                <li class="separator selected">
                    <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
                </li>
            </ul>
        </div>
        <div id="header">
            <div class="images clearfix">
                
                
            </div>
            <p>Provides the way of using interactive mode from other process via TCP.</p>
        </div>


        <table id="colset" border="0" cellpadding="0" cellspacing="0">
            <tr>
                <td id="col1">
                    <div id="main" class="corner-all">

                        <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                        <div class="project">
                            <h1>Improx - Interactive Mode Proxy - Reference Documentation</h1>
                            <p><strong>Authors:</strong> Yasuharu NAKANO</p>
                            <p><strong>Version:</strong> 0.2</p>
                            
                        </div>

                        
                        <div id="table-of-content">
                            <h2>Table of Contents</h2>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#introduction"><strong>1</strong><span>Introduction</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#interactiveMode"><strong>1.1</strong><span>Interactive Mode is awesome! But...</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#whatCanIDo"><strong>1.2</strong><span>What can I do with Improx Plugin?</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#groovyserv"><strong>1.3</strong><span>Relationship with GroovyServ</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#gettingStarted"><strong>2</strong><span>Getting Started</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#installClientScripts"><strong>2.1</strong><span>Install Client Scripts into your environment</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#startServer"><strong>2.2</strong><span>Start Server</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#executeCommand"><strong>2.3</strong><span>Execute Command from Client</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#smartInvoker"><strong>2.4</strong><span>Smart Invoker</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#integrationWithEditors"><strong>3</strong><span>Integration with Editors and IDEs</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#integrationWithIdea"><strong>3.1</strong><span>IntelliJ IDEA</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#integrationWithEclipse"><strong>3.2</strong><span>Eclipse (STS/GGTS)</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#integrationWithSublimeText2"><strong>3.3</strong><span>Sublime Text 2</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#integrationWithVim"><strong>3.4</strong><span>Vim + QuickRun</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#advancedTopics"><strong>4</strong><span>Advanced Topics</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#protocol"><strong>4.1</strong><span>Communication Protocol</span></a></div>
                            
                            <div class="toc-item" style="margin-left:20px"><a href="#standardProtocol"><strong>4.1.1</strong><span>Standard Protocol</span></a></div>
                            
                            <div class="toc-item" style="margin-left:20px"><a href="#httpProtocol"><strong>4.1.2</strong><span>HTTP Protocol</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#unsupportedCommands"><strong>4.2</strong><span>Unsupported Commands</span></a></div>
                            
                            <div style="clear:both" ></div>
                        </div>
                        
                        

<h1 id="introduction">1 Introduction</h1>
 <em class="italic">"Once interactive mode was available only from console..."</em> 



<h2 id="interactiveMode">1.1 Interactive Mode is awesome! But...</h2>
Are you using the <strong class="bold">interactive mode</strong>?
It's the one of the greatest features of Grails and the fastest way to execute a Grails command.<p class="paragraph"/>IDEs, like as IntelliJ IDEA, are very convenient for code formatting, complementation, jumping to a related class, and so on.
But, about an execution of a Grails command, especially "test-app", it's still so slow that you tend to miss a rhythm of development.
Certainly you can use interactive mode on a console to execute a command faster and it's very very useful actually,
but you can't use the interactive mode from IDEs or editors, unfortunately.
So you have to frequently switch windows between a interactive mode console and an IDE/editor, while in development.<p class="paragraph"/>This plugin provides the way of using interactive mode from other process, including IDEs and editors, via TCP.



<h2 id="whatCanIDo">1.2 What can I do with Improx Plugin?</h2>
If you install this plugin to your application, you can invoke almost all Grails commands on an interactive mode,
which started up in advance on a console, from other processes via a TCP.
This means that you can quickly run a test which is opened in you favorite editor or IDE.
If you've appropriately set them up, you'd have only to push a key in order to run it.<p class="paragraph"/>For example, in Sublime Text 2:<p class="paragraph"/>    <img border="0" class="center" src="../img/st2-run.png"></img><p class="paragraph"/><strong class="bold">It has taken only 1.9 sec as total time of the build!</strong>
Though it's certainly a simple unit test, this is the surprising result.<p class="paragraph"/>In addition, you can easily make an original build script, for example, to execute 'doc' command and reload a web browser window automatically.<p class="paragraph"/>In short, <strong class="bold">this plugin brings you the more convenience and flexibility for Grails application development.</strong>



<h2 id="groovyserv">1.3 Relationship with GroovyServ</h2>
Do you know <strong class="bold">GroovyServ</strong>?
It accelerates a feedback cycle for development of <strong class="bold">Groovy scripts</strong>.<p class="paragraph"/><blockquote class="quote">
GroovyServ makes Groovy’s startup time much faster, by pre-invoking Groovy as a server.<p class="paragraph"/>In software development with script languages, it’s very important that repeat velocity of “try-and-run” is fast enough. It is too long to wait for start-up of Groovy even for 1 second. GroovyServ reduces startup time of the JVM and Groovy significantly. It’s of course dependent on environments, but in most case, it is 10 to 20 times faster than regular Groovy.<p class="paragraph"/><a href="http://kobo.github.com/groovyserv/" target="blank">GroovyServ on GitHub</a>
</blockquote><p class="paragraph"/>The <strong class="bold">improx plugin</strong> code-named <strong class="bold">GrailsServ</strong>
because it accelerates a feedback cycle for development of <strong class="bold">Grails application</strong>.
But the name of "GrailsServ" isn't good because Grails is essentially "server" and it might lead confusion and misunderstanding.
So I've given it a more explicit name which shows the architecture of the plugin
Yes, this plugin works as just only a proxy of interactive mode.<p class="paragraph"/>GroovyServ can give you much advantages when you use the plugin because the start-up time of the groovy client scripts of the plugin will be much faster.<p class="paragraph"/>See also:  <em class="italic">GroovyServ on GitHub</em> : <a href="http://kobo.github.com/groovyserv/" target="blank">http://kobo.github.com/groovyserv/</a>



<h1 id="gettingStarted">2 Getting Started</h1>
This plugin's architecture is very simple.
When you execute the grails script of <code>improx-start</code> on an interactive mode which run up in advance,
it opens and listens a port (default <code>8096</code>).
Then, it executes a command on the interactive mode when receiving from a client.<p class="paragraph"/>It uses <a href="../guide/single.html#protocol" class="guide">a simple protocol on TCP</a>, so you can access by variety clients and even make your own new client.



<h2 id="installClientScripts">2.1 Install Client Scripts into your environment</h2>
Execute the following command:<p class="paragraph"/><div class="code"><pre>grails improx&#45;install&#45;resources</pre></div><p class="paragraph"/>The <code>improx-resources</code> directory including client scripts is expanded.<p class="paragraph"/><div class="code"><pre>improx&#45;resources/
 └── scripts
      ├── improxClient.groovy
      ├── improxClient.sh
      ├── improxSmartInvoker.groovy
      └── improxSmartInvoker.sh</pre></div><p class="paragraph"/>If you want to use shell script, give an execute permission to the scripts as follows:<p class="paragraph"/><div class="code"><pre>$ chmod +x improx&#45;resources/scripts/&#42;.sh</pre></div><p class="paragraph"/>You should move the directory wherever you want, for example <code>~/.grails/improx</code> or <code>~/bin</code>.
If you deploy it to an appropriate path, you don't have to install the scripts whenever you use it on new project.
So I recommend that at least it's not under the application project directory.



<h2 id="startServer">2.2 Start Server</h2>
Run the improx proxy server on <strong class="bold">interactive mode</strong>:<p class="paragraph"/><div class="code"><pre>grails&#62; improx&#45;start
Interactive mode proxy server has started on 8096 port.</pre></div><p class="paragraph"/><blockquote class="warning">
It doesn't support not on interactive mode.
</blockquote><p class="paragraph"/>You can stop the server anytime using <code>improx-stop</code> command.<p class="paragraph"/><div class="code"><pre>grails&#62; improx&#45;stop
Interactive mode proxy server stopped.</pre></div>



<h2 id="executeCommand">2.3 Execute Command from Client</h2>
<h3>via HTTP</h3><p class="paragraph"/>I don't know what kind of environment you have.
So at first, I introduce the most general way to execute a command as client, using <strong class="bold">HTTP protocol</strong>.
<a href="../guide/single.html#protocol" class="guide">Improx plugin also supports for HTTP protocol</a>, so you can easily execute a command using it.<p class="paragraph"/>When you open the following URL on web browser:<p class="paragraph"/><div class="code"><pre>http://localhost:8096/help</pre></div><p class="paragraph"/>The result will be shown as the response:<p class="paragraph"/><img border="0" class="center" src="../img/browser-run-help.png"></img><p class="paragraph"/>And a "received" message will be also shown on the console on which <code>improx-start</code> has run:<p class="paragraph"/><img border="0" class="center" src="../img/terminal-received.png"></img><p class="paragraph"/>
You can execute a command as follows:<p class="paragraph"/><div class="code"><pre>http://localhost:8096/list&#45;plugins
http://localhost:8096/test&#45;app%20unit:%20sample.SampleUnitTests</pre></div><p class="paragraph"/><blockquote class="note">
You have to make a command line encode by URL encoding when invoking via HTTP.
</blockquote><p class="paragraph"/><h3>Shell Script</h3><p class="paragraph"/>If shell script is available in your environment, you can use <a href="../ref/Client Scripts/improxClient.sh.html" class="clientScripts">improxClient.sh</a>.<p class="paragraph"/><div class="code"><pre>improxClient.sh help
improxClient.sh test&#45;app unit: sample.SampleUnitTests</pre></div><p class="paragraph"/><h3>Groovy Script</h3><p class="paragraph"/>If there is <code>groovy</code> command in your environment, you can use <a href="../ref/Client Scripts/improxClient.groovy.html" class="clientScripts">improxClient.groovy</a>.<p class="paragraph"/><div class="code"><pre>groovy improxClient.groovy help
groovy improxClient.groovy test&#45;app unit: sample.SampleUnitTests</pre></div><p class="paragraph"/>The <code>groovyclient</code> of GroovyServ is strongly recommended to execute Groovy script.
If you've installed GroovyServ, you can do the above with <code>groovyclient</code>, as follows:<p class="paragraph"/><div class="code"><pre>groovyclient improxClient.groovy help
groovyclient improxClient.groovy tes&#45;app unit: sample.SampleUnitTests</pre></div><p class="paragraph"/><blockquote class="note">
It needs a <code>groovyserver</code> process to run <code>groovyclient</code>.
The first time <code>groovyclient</code> runs, a <code>groovyserver</code> automatically starts up.
It takes a few extra seconds.
Don't get angry.
You can much faster run a script after second time.
</blockquote>



<h2 id="smartInvoker">2.4 Smart Invoker</h2>
A simple client as the above isn't convenient very much in order to invoke a test file from editors or IDEs,
because it needs a complicated construction of arguments for each test type.
So the improx plugin provides smart invoker scripts, which can invoke any <code>.groovy</code> file in an appropriate way.<p class="paragraph"/>For giving more benefit, you should set up your editor or IDE to be able to integrate with this plugin.
See <a href="../guide/single.html#integrationWithEditors" class="guide">the next chapter</a>.<p class="paragraph"/><h3>Shell Script</h3><p class="paragraph"/>If shell script is available in your environment, you can use <a href="../ref/Client Scripts/improxSmartInvoker.sh.html" class="clientScripts">improxSmartInvoker.sh</a>.<p class="paragraph"/><div class="code"><pre>improxSmartInvoker.sh /path/to/yourApp/test/unit/sample/SampleUnitTests.groovy &#45;&#45;&#91;1&#93;
improxSmartInvoker.sh /path/to/yourApp/test/integration/sample/SampleIntegTests.groovy &#45;&#45;&#91;2&#93;
improxSmartInvoker.sh /path/to/yourApp/test/functional/sample/SampleFuncTests.groovy &#45;&#45;&#91;3&#93;
improxSmartInvoker.sh /path/to/scriptDir/myTribialScript.groovy &#45;&#45;&#91;4&#93;</pre></div>
<ul class="star">
<li><code>&#91;1&#93;</code> invokes '<code>test-app unit: sample.SampleUnitTests</code>' on the interactive mode.</li>
<li><code>&#91;2&#93;</code> invokes '<code>test-app integration: sample.SampleIntegTests</code>' on the interactive mode.</li>
<li><code>&#91;3&#93;</code> invokes '<code>grails test-app functional: sample.SampleFuncTests</code>' as new standalone Grails process.</li>
<li><code>&#91;4&#93;</code> invokes '<code>groovy /path/to/scriptDir/myTribialScript.groovy</code>' as a normal Groovy script.&#10;  If you've istalled GroovyServ, the <code>groovyclient</code> is automatically used instead of <code>groovy</code> command.</li>
</ul><p class="paragraph"/><h3>Groovy Script</h3><p class="paragraph"/>If there is <code>groovy</code> command in your environment, you can use <a href="../ref/Client Scripts/improxSmartInvoker.groovy.html" class="clientScripts">improxSmartInvoker.groovy</a>.<p class="paragraph"/><div class="code"><pre>groovy improxSmartInvoker.groovy /path/to/yourApp/test/unit/sample/SampleUnitTests.groovy &#45;&#45;&#91;1&#93;
groovy improxSmartInvoker.groovy /path/to/yourApp/test/integration/sample/SampleIntegTests.groovy &#45;&#45;&#91;2&#93;
groovy improxSmartInvoker.groovy /path/to/yourApp/test/functional/sample/SampleFuncTests.groovy &#45;&#45;&#91;3&#93;
groovy improxSmartInvoker.groovy /path/to/scriptDir/myTribialScript.groovy &#45;&#45;&#91;4&#93;</pre></div>
<ul class="star">
<li><code>&#91;1&#93;</code> invokes '<code>test-app unit: sample.SampleUnitTests</code>' on the interactive mode.</li>
<li><code>&#91;2&#93;</code> invokes '<code>test-app integration: sample.SampleIntegTests</code>' on the interactive mode.</li>
<li><code>&#91;3&#93;</code> invokes '<code>grails test-app functional: sample.SampleFuncTests</code>' as new standalone Grails process.</li>
<li><code>&#91;4&#93;</code> invokes '<code>groovy /path/to/scriptDir/myTribialScript.groovy</code>' as a normal Groovy script.&#10;  If you've istalled GroovyServ, the <code>groovyclient</code> is automatically used instead of <code>groovy</code> command.</li>
</ul><p class="paragraph"/>


<h1 id="integrationWithEditors">3 Integration with Editors and IDEs</h1>
If the editor which you uses supports for external tools,
you can immediately execute the code on the current editor by one action.
To do it, you have to set up something.<p class="paragraph"/>



<h2 id="integrationWithIdea">3.1 IntelliJ IDEA</h2>
<h3>External Tools</h3>
<ol>
<li>Open Settings dialog from  <em class="italic">"Preferences"</em>  menu.</li>
<li>Select  <em class="italic">"External Tools"</em>  at left pane.</li>
<li>Click the below  <em class="italic">"+"</em>  button to show  <em class="italic">"Edit Tool"</em>  dialog:&#10;    <img border="0" class="center" src="../img/idea-external-tools-add.png"></img></li>
<li>Set the fields as follows if shell script is available in your environment:&#10;    <table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Field</strong></th><th><strong class="bold">Value</strong></th><th><strong class="bold">Remarks</strong></th></tr><tr class="table-odd"><td>Name</td><td><code>Improx: SmartInvoker &#91;sh&#93;</code></td><td>&#160;</td></tr><tr class="table-even"><td>Group</td><td><code>Grails</code></td><td>&#160;</td></tr><tr class="table-odd"><td>Program</td><td><code>/path/to/improxSmartInvoker.sh</code></td><td>&#160;</td></tr><tr class="table-even"><td>Parameters</td><td><code>$FilePath$</code></td><td>&#160;</td></tr><tr class="table-odd"><td>Working directory</td><td><code>$FileDir$</code></td><td>&#160;</td></tr></table>&#10;    <img border="0" class="center" src="../img/idea-external-tools-edit-sh.png"></img>&#10;    Else:&#10;    <table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Field</strong></th><th><strong class="bold">Value</strong></th><th><strong class="bold">Remarks</strong></th></tr><tr class="table-odd"><td>Name</td><td><code>Improx: SmartInvoker &#91;Groovy&#93;</code></td><td>&#160;</td></tr><tr class="table-even"><td>Group</td><td><code>Grails</code></td><td>&#160;</td></tr><tr class="table-odd"><td>Program</td><td><code>/path/to/groovyclient</code></td><td>You can use normal <code>groovy</code> command, but it needs a global <code>JAVA_HOME</code> environment variable and your patience.</td></tr><tr class="table-even"><td>Parameters</td><td><code>/path/to/improxSmartInvoker.sh $FilePath$</code></td><td>using a white space as delimiter</td></tr><tr class="table-odd"><td>Working directory</td><td><code>$FileDir$</code></td><td>&#160;</td></tr></table>&#10;    <img border="0" class="center" src="../img/idea-external-tools-edit-groovy.png"></img></li>
<li>Click  <em class="italic">"OK"</em>  button to save.</li>
</ol><p class="paragraph"/><h3>Keymap</h3>
<ol>
<li>Open Settings dialog from  <em class="italic">"Preferences"</em>  menu.</li>
<li>Select  <em class="italic">"Keymap"</em>  at left pane.</li>
<li>Right-click  <em class="italic">"External Tools &#62; Grails &#62; Improx: SmartInvoker (which you want)"</em>  item at right pane and select  <em class="italic">"Add Keyboard Shortcut"</em>  item:&#10;    <img border="0" class="center" src="../img/idea-keymap-menu.png"></img></li>
<li>Push your favorite key at  <em class="italic">"First Stroke"</em>  field on the  <em class="italic">"Enter Keyboard Shortcut"</em>  dialog:&#10;    <img border="0" class="center" src="../img/idea-keymap-bind.png"></img></li>
<li>Click  <em class="italic">"OK"</em>  button to save.</li>
</ol><p class="paragraph"/><h3>Try to run</h3>
<ol>
<li>Open a test class in the editor.</li>
<li>Push the key which you set, for example, <code>F9</code>.</li>
<li>Improx plugin run only the active test file and output the result to  <em class="italic">"Run"</em>  view in real time:&#10;    <img border="0" class="center" src="../img/idea-run.png"></img></li>
</ol><p class="paragraph"/><blockquote class="note">
In case of using GroovyServ, you should run <code>groovyserver</code> command at once in advance.
</blockquote>



<h2 id="integrationWithEclipse">3.2 Eclipse (STS/GGTS)</h2>
<h3>External Tools</h3>
<ol>
<li>Open  <em class="italic">"External Tools Configurations"</em>  dialog from  <em class="italic">"Run &#62; External Tools &#62; External Tools Configurations..."</em>  menu.</li>
<li>Right click on  <em class="italic">"Program"</em>  item at left pane and select  <em class="italic">"New"</em>  item:&#10;    <img border="0" class="center" src="../img/eclipse-external-tools-new.png"></img></li>
<li>Set the fields as follows if shell script is available in your environment:&#10;    <table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Field</strong></th><th><strong class="bold">Value</strong></th><th><strong class="bold">Remarks</strong></th></tr><tr class="table-odd"><td>Name</td><td><code>Grails Improx SmartInvoker &#91;sh&#93;</code></td><td>&#160;</td></tr><tr class="table-even"><td>Location</td><td><code>/path/to/improxSmartInvoker.sh</code></td><td>&#160;</td></tr><tr class="table-odd"><td>Working Directory</td><td><code>${container_loc}$</code></td><td>&#160;</td></tr><tr class="table-even"><td>Arguments</td><td><code>${resource_loc}$</code></td><td>&#160;</td></tr></table>&#10;    <img border="0" class="center" src="../img/eclipse-external-tools-edit-sh.png"></img>&#10;    Else:&#10;    <table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Field</strong></th><th><strong class="bold">Value</strong></th><th><strong class="bold">Remarks</strong></th></tr><tr class="table-odd"><td>Name</td><td><code>Grails Improx SmartInvoker &#91;Groovy&#93;</code></td><td>&#160;</td></tr><tr class="table-even"><td>Location</td><td><code>/path/to/groovyclient</code></td><td>You can use normal <code>groovy</code> command, but it needs a <code>JAVA_HOME</code> environment variable at  <em class="italic">"Environment"</em>  tab and your patience.</td></tr><tr class="table-odd"><td>Working Directory</td><td><code>${container_loc}$</code></td><td>&#160;</td></tr><tr class="table-even"><td>Arguments</td><td><code>/path/to/improxSmartInvoker.groovy ${resource_loc}$</code></td><td>using a white space as delimiter</td></tr></table>&#10;    <img border="0" class="center" src="../img/eclipse-external-tools-edit-groovy.png"></img></li>
<li>Click  <em class="italic">"OK"</em>  button to save.</li>
</ol><p class="paragraph"/><h3>Try to run</h3>
<ol>
<li>Open a test class in the editor.</li>
<li>Open  <em class="italic">"External Tools Configurations"</em>  dialog from  <em class="italic">"Run &#62; External Tools &#62; External Tools Configurations..."</em>  menu.</li>
<li>Select  <em class="italic">"Grails Improx SmartInvoker (which you want)"</em>  item at left pane and click  <em class="italic">"Run"</em>  button.</li>
<li>Improx plugin run only the active test file and output the result to  <em class="italic">"Console"</em>  view in real time:&#10;    <img border="0" class="center" src="../img/eclipse-run.png"></img></li>
</ol><p class="paragraph"/><blockquote class="note">
In case of using GroovyServ, you should run <code>groovyserver</code> command at once in advance.
</blockquote><p class="paragraph"/><blockquote class="note">
After second time, you can easily run the external tool from the submenu of  <em class="italic">"Run &#62; External Tools"</em> .
</blockquote><p class="paragraph"/>


<h2 id="integrationWithSublimeText2">3.3 Sublime Text 2</h2>
<h3>Build System</h3>
<ol>
<li>Select  <em class="italic">"Tools &#62; Build System &#62; New Build System..."</em>  menu to open new file.</li>
<li>Edit as follows and save the file as <code>Groovy.sublime-build</code> (in <code>Packages/User</code> directory as default).</li>
</ol><p class="paragraph"/>If shell script is available in your environment:<p class="paragraph"/><div class="code"><pre>&#123;
    <span class="java&#45;quote">"cmd"</span>: &#91;
        <span class="java&#45;quote">"/path/to/improxSmartInvoker.sh"</span>,
        <span class="java&#45;quote">"$file"</span>
    &#93;,
    <span class="java&#45;quote">"file_regex"</span>: "&#92;&#92;((.&#42;?):(&#91;0&#45;9&#93;&#42;)&#92;&#92;)<span class="java&#45;quote">",
    "</span>selector<span class="java&#45;quote">": "</span>source.groovy"
&#125;</pre></div><p class="paragraph"/>Else:<p class="paragraph"/><div class="code"><pre>&#123;
    <span class="java&#45;quote">"cmd"</span>: &#91;
        <span class="java&#45;quote">"/path/to/groovyclient"</span>, // OR /path/to/groovy
        <span class="java&#45;quote">"/path/to/improxSmartInvoker.groovy"</span>,
        <span class="java&#45;quote">"$file"</span>
    &#93;,
    <span class="java&#45;quote">"file_regex"</span>: "&#92;&#92;((.&#42;?):(&#91;0&#45;9&#93;&#42;)&#92;&#92;)<span class="java&#45;quote">",
    "</span>selector<span class="java&#45;quote">": "</span>source.groovy"
&#125;</pre></div><p class="paragraph"/>
<h3>Try to run</h3>
<ol>
<li>Open a test class in the editor.</li>
<li>Select  <em class="italic">"Tools &#62; Build"</em>  menu (or push a shortcut key, like <code>super+b</code>)</li>
<li>Improx plugin run only the active test file and output the result to Bulid Results pane in real time:&#10;    <img border="0" class="center" src="../img/st2-run.png"></img></li>
</ol><p class="paragraph"/><blockquote class="note">
In case of using GroovyServ, you should run <code>groovyserver</code> command at once in advance.
</blockquote>



<h2 id="integrationWithVim">3.4 Vim + QuickRun</h2>
<h3>quickrun.vim</h3>
<ol>
<li>Install <a href="http://www.vim.org/scripts/script.php?script_id=3146" target="blank">quickrun.vim</a> plugin if you hasn't done so.&#10;    (cf. <a href="http://nobeans-en.blogspot.jp/2011/10/invoking-groovy-script-directly-on-vim.html" target="blank">Invoking Groovy Script Directly on Vim using quickrun.vim and GroovyServ</a>)</li>
<li>Add the following lines into your <code>.vimrc</code> and save.</li>
</ol><p class="paragraph"/>If shell script is available in your environment:<p class="paragraph"/><div class="code"><pre>let g:quickrun_config = &#123;&#125;
let g:quickrun_config.groovy = &#123;'command' : '/path/to/improxSmartInvoker.sh', 'cmdopt': ''&#125;</pre></div><p class="paragraph"/>Else:<p class="paragraph"/><div class="code"><pre>let g:quickrun_config = &#123;&#125;
let g:quickrun_config.groovy = &#123;'command' : '/path/to/groovyclient', 'cmdopt': '/path/to/improxSmartInvoker.groovy'&#125;</pre></div><p class="paragraph"/>
<h3>Try to run</h3>
<ol>
<li>Open a test class in the editor.</li>
<li>Execute ex command <code>:QuickRun</code> (or type <code>&#60;Leader&#62;</code> <code>r</code>.)</li>
<li>Improx plugin run only the active test file and output the result to a buffer after it completely finishes:&#10;    <img border="0" class="center" src="../img/vim-run.png"></img></li>
</ol><p class="paragraph"/><blockquote class="note">
In case of using GroovyServ, you should run <code>groovyserver</code> command at once in advance.
</blockquote>



<h1 id="advancedTopics">4 Advanced Topics</h1>



<h2 id="protocol">4.1 Communication Protocol</h2>



<h2 id="standardProtocol">4.1.1 Standard Protocol</h2>
The <code>improx-start</code> command opens and listens a TCP port as a server.<p class="paragraph"/><h3>Request from Client to Server</h3><p class="paragraph"/>A client sends a command line with a line separator as request.<p class="paragraph"/><div class="code"><pre>COMMAND</pre></div><p class="paragraph"/>Examples:<p class="paragraph"/><div class="code"><pre>help</pre></div><p class="paragraph"/><div class="code"><pre>test&#45;app unit: sample.SampleUnitTests</pre></div><p class="paragraph"/><h3>Response from Server to Client</h3><p class="paragraph"/>While a server is sending a response, a client can read the response from a keep-aliving socket.
When the server finishes sending all response to the client, the socket will be closed by the server.
The client knows that the session is done by closing the socket.



<h2 id="httpProtocol">4.1.2 HTTP Protocol</h2>
The improx sever also supports <code>GET</code> method of <code>HTTP</code> protocol.<p class="paragraph"/><div class="code"><pre>GET /COMMAND HTTP/1.0</pre></div><p class="paragraph"/><div class="code"><pre>GET /COMMAND HTTP/1.1</pre></div>
<ul class="star">
<li><code>COMMAND</code> - a command line which is encoded by URL encoding.</li>
</ul><p class="paragraph"/>Examples:<p class="paragraph"/><div class="code"><pre>GET /help HTTP/1.1</pre></div><p class="paragraph"/><div class="code"><pre>GET /test&#45;app%20unit:%20sample.SampleUnitTests HTTP/1.1</pre></div><p class="paragraph"/>So you can use any http clients and any web browsers which already exist,
for example <code>curl</code>, <code>wget</code>, <code>Chrome</code>, <code>Firefox</code> and even <code>Internet Explorer</code>.<p class="paragraph"/><div class="code"><pre>curl http://localhost:8096/help
curl http://localhost:8096/test&#45;app%20unit:%20sample.SampleUnitTest</pre></div><p class="paragraph"/><blockquote class="note">
You might need a <code>--noproxy '*'</code> option if you've set environment variables for http proxy.
</blockquote><p class="paragraph"/>Web browser often requests for favicon:<p class="paragraph"/><div class="code"><pre>GET /favicon.ico HTTP/1.1</pre></div><p class="paragraph"/>So, in case of the command which starts with "<code>favicon.</code>",
improx server returns a  <em class="italic">"Command not found"</em>  error message instead of causing an actual error.



<h2 id="unsupportedCommands">4.2 Unsupported Commands</h2>
<h3>As same as interactive mode</h3>
<ul class="star">
<li>install-plugin</li>
<li>uninstall-plugin</li>
</ul><p class="paragraph"/><h3>Special built-in commands</h3>
<ul class="star">
<li>create-app</li>
<li>quit</li>
<li>stop-app</li>
<li>exit and</li>
<li>!(shell command)</li>
</ul><p class="paragraph"/><h3>Using threads complexly</h3><p class="paragraph"/>Because a start-app command causes a new thread to monitor the user input on interactive mode.
The issue seems to be caused by handling the old thread.
<ul class="star">
<li>start-app</li>
</ul><p class="paragraph"/>

                    </div>
                </td>
                <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Client Scripts</h1><div class="menu-sub">
                        
                        <div class="menu-item"><a href="../ref/Client%20Scripts/Usage.html">Usage</a></div>
                        
                        
                        <div class="menu-item"><a href="../ref/Client%20Scripts/improxClient.groovy.html">improxClient.groovy</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Client%20Scripts/improxClient.sh.html">improxClient.sh</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Client%20Scripts/improxSmartInvoker.groovy.html">improxSmartInvoker.groovy</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Client%20Scripts/improxSmartInvoker.sh.html">improxSmartInvoker.sh</a>
                        </div>
                        
                        </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Server Command Line</h1><div class="menu-sub">
                        
                        <div class="menu-item"><a href="../ref/Server%20Command%20Line/Usage.html">Usage</a></div>
                        
                        
                        <div class="menu-item"><a href="../ref/Server%20Command%20Line/improx-install-resources.html">improx-install-resources</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Server%20Command%20Line/improx-start.html">improx-start</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Server%20Command%20Line/improx-stop.html">improx-stop</a>
                        </div>
                        
                        </div>
                    </div>
                    
                </div>
            </div>
        </td>
            </tr>
        </table>

        <div id="footer">
            
            
<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3438563-5']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>

        </div>



<script type="text/javascript" src="../js/docs.js"></script>

    </body>
</html>
